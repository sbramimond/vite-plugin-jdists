"use strict";const d=require("jdists"),m=require("@rollup/pluginutils");function p(c={}){const{include:f=/\.(js|ts|jsx|tsx|vue|svelte|astro|md)$/,exclude:g=[],remove:s=["debug","test"],trigger:i=["release"],config:n,...a}=c,o=m.createFilter(f,g),u=e=>Array.isArray(e)?e.join(","):e;return{name:"vite-plugin-jdists",enforce:"pre",transform(e,t){if(!o(t))return null;try{const r={fromString:!0,path:t,...a};return s&&(r.remove=u(s)),i&&(r.trigger=u(i)),n&&(r.config=n),{code:d.build(e,r),map:null}}catch{return{code:e,map:null}}},handleHotUpdate(e){const{file:t,server:r,modules:l}=e;if(o(t))return console.log(`[vite-plugin-jdists] 热更新文件: ${t}`),l}}}module.exports=p;
